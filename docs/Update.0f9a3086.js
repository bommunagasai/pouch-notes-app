var e=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequirec250;e.register("9gsgr",(function(o,t){var l,n,d,i,a;l=o.exports,Object.defineProperty(l,"__esModule",{value:!0,configurable:!0}),n=o.exports,d="default",i=function(){return b},Object.defineProperty(n,d,{get:i,set:a,enumerable:!0,configurable:!0});var r=e("k8UWl"),c=e("fd2wl"),s=e("iZr1d"),u=e("jPO5J"),p=e("bo4iJ"),v=e("8Mxml"),f=e("9qkK4"),y=e("iVzkL"),_=e("aFpcj"),h=e("hdAu4");const g={loading:!0,_id:null,doc:[],readOnly:!0,dialog:{show:!1},updateContent:[]},m=(e,o)=>{switch(o.type){case"loaded":const{doc:t,_id:l}=o.payload;return{...e,loading:!1,doc:t,_id:l};case"unlock_editor":return{...e,readOnly:!1};case"save_to_db_init":return{...e,updateContent:o.payload,dialog:{...e.dialog,show:!0}};case"close_create_form":return{...e,dialog:{...e.dialog,show:!1}};default:return new Error("Unkown action type")}};var b=u.withSizes((({width:e})=>({isMobile:e<=576})))((({isMobile:e})=>{var o,t,l,n,d,i,a,u,b,w,j;const{noteId:x}=s.useParams(),k=new v.default("NOTE_DB"),[O,C]=c.useReducer(m,g),D=s.useNavigate();c.useEffect((()=>{T(x)}),[]);const T=async e=>{try{await k.createOrFindDB();const o=await k.getNote(e);C({type:"loaded",payload:{_id:e,doc:null==o?void 0:o.docs}})}catch(e){console.log(e),C({type:"db_init_failed"})}};return r.jsx(f.Container,{children:r.jsx(f.Row,{children:r.jsx(f.Col,{children:O.loading?r.jsx(_.default,{}):(null===(o=O.doc)||void 0===o?void 0:o.length)?r.jsxs(r.Fragment,{children:[r.jsx(c.Suspense,{fallback:r.jsx(f.SpinLoader,{}),children:r.jsx(y.default,{id:p.v1(),isMobile:e,readOnly:O.readOnly,value:null==O||null===(t=O.doc)||void 0===t||null===(l=t[0])||void 0===l?void 0:l.content,onUnlock:()=>C({type:"unlock_editor"}),onSave:async e=>{C({type:"save_to_db_init",payload:e})},goBack:()=>D("/")})}),r.jsx(f.SheetContainer,{show:O.dialog.show,bottom:!0,children:O.dialog.show&&r.jsx(h.default,{title:"Update Notes",hint:"Would be usefull for search",formData:{metaTitle:null==O||null===(n=O.doc)||void 0===n||null===(d=n[0])||void 0===d?void 0:d.metaTitle,metaDescription:null==O||null===(i=O.doc)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.metaDescription,theme:null==O||null===(u=O.doc)||void 0===u||null===(b=u[0])||void 0===b?void 0:b.theme,type:null==O||null===(w=O.doc)||void 0===w||null===(j=w[0])||void 0===j?void 0:j.type},onCancel:()=>C({type:"close_create_form"}),onSubmit:e=>(async e=>{const{metaTitle:o,metaDescription:t,theme:l,type:n}=e;C({type:"close_create_form"});try{var d,i;await k.updateNote({_id:O._id,_rev:null==O||null===(d=O.doc)||void 0===d||null===(i=d[0])||void 0===i?void 0:i._rev,content:O.updateContent,metaTitle:o,metaDescription:t,theme:l,type:n}),D("/")}catch(e){console.log(e),C({type:"save_to_db_failed"})}})(e)})})]}):r.jsx("p",{children:"Not Foun"})})})})}))}));
//# sourceMappingURL=Update.0f9a3086.js.map
