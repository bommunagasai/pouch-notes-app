{"mappings":"0jBAoBA,MAAMA,EAAe,CACnBC,QAAQ,EACRC,QAAS,GACTC,MAAO,OACPC,KAAM,OACNC,UAAW,GACXC,gBAAiB,GACjBC,OAAQ,CACNC,MAAM,IAIJC,EAAO,CAAIC,EAAOC,KACtB,OAAQA,EAAOP,MACb,IAAK,kBACH,MAAO,IACFM,EACHT,QAAQ,EACRC,QAASS,EAAOC,QAChBL,OAAQ,IAAKG,EAAMH,OAAQC,MAAM,IAErC,IAAK,oBACH,MAAO,IACFE,EACHH,OAAQ,IAAKG,EAAMH,OAAQC,MAAM,YAGnC,OAAO,IAAIK,MAAM,wBA0DvBC,EAAeC,EAAAC,WAAS,EAAGC,MAACA,MAAO,CAAQC,SAAUD,GAAS,OAA/CF,EAtDH,EAAKG,SAACA,MAChB,MAAOR,EAAOS,GAAYC,EAAAC,WAAWZ,EAAST,GACxCsB,EAAK,IAAIC,EAAAC,QAAa,WACtBC,EAAWC,EAAAC,cAuBjB,OAAMC,EAAAC,KACHC,EAAAC,UAAS,CAACC,IAAE,EAACC,UAAWC,EAAAC,aAAa,CAAEC,UAAWF,EAAAG,MAASC,uBACzDR,EAAAS,IAAG,gBACDT,EAAAU,IAAG,gBACDpB,EAAAqB,SAAQ,CAACC,SAAQd,EAAAe,IAAGb,EAAAc,WAAU,mBAC5BC,EAAArB,QAAW,CACVsB,GAAIC,EAAAC,KACJ9B,SAAUA,EACV+B,OA7BQC,MAAUhD,IAC5BiB,EAAS,CAAEf,KAAM,kBAAmBQ,QAASV,KA6BnCiD,OAAM,IAAQ1B,EAAS,KACvB2B,MAAOC,EAAAC,UAAU9B,sBAKxBM,EAAAyB,eAAc,CAAC/C,KAAME,EAAMH,OAAOC,KAAMgD,QAAM,iBAC5CC,EAAAjC,QAAc,CACbkC,MAAM,eACNC,KAAK,8BACLC,SAAU,CAAEzD,MAAOO,EAAMP,MAAOC,KAAMM,EAAMN,MAC5CyD,SAAQ,IAAQ1C,EAAS,CAAEf,KAAM,sBACjC0D,SAAWF,GAtCLV,OAAUU,IACtB,MAAOvD,UAACA,EAASC,gBAAEA,EAAeH,MAAEA,EAAKC,KAAEA,GAASwD,EACpDzC,EAAS,CAAEf,KAAM,sBACjB,UACQkB,EAAGyC,YAAY,CACnB7D,QAASQ,EAAMR,kBACfG,kBACAC,QACAH,OACAC,IAEFqB,EAAS,KACT,MAAOuC,GACPC,QAAQC,IAAIF,GACZ7C,EAAS,CAAEf,KAAM,wBAwBW+D,CAASP,mHC9F3C,MAYaQ,EAAY,CACvB5C,QAAS,CAbQ,EAAI6C,GAAOjE,KAACA,EAAOkE,EAAAC,kBAAiBC,KAAEA,GAAS,MAChE,MAAMC,EAAO,MAAEJ,GAKf,OAJIG,IACFC,EAAKD,IAAQ,GAGR,MACLpE,EACAsE,SAAU,CAACD,KAMXE,CAAc,GAAI,CAAEvE,KAAMkE,EAAAC","sources":["src/containers/Create.js","src/components/Editor/templates.js"],"sourcesContent":["import React, { useReducer, Suspense } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { withSizes } from 'react-sizes'\r\nimport {\r\n  Container,\r\n  Row,\r\n  Col,\r\n  SheetContainer,\r\n  SpinLoader,\r\n} from '@ds.crisp/react-components'\r\nimport { v1 as uuid } from 'uuid'\r\n\r\nimport { Color as ColorMap, getClassName } from '@ds.crisp/foundation'\r\nimport StoreManager from '../services/StoreManager'\r\n\r\nimport CreateNoteForm from '../components/CreateNoteForm'\r\n\r\nimport PlateEditor from '../components/Editor'\r\nimport { TEMPLATES } from '../components/Editor/templates'\r\n\r\nconst initialState = {\r\n  saving: false,\r\n  content: [],\r\n  theme: 'dark',\r\n  type: 'bulb',\r\n  metaTitle: '',\r\n  metaDescription: '',\r\n  dialog: {\r\n    show: false,\r\n  },\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case 'save_to_db_init':\r\n      return {\r\n        ...state,\r\n        saving: true,\r\n        content: action.payload,\r\n        dialog: { ...state.dialog, show: true },\r\n      }\r\n    case 'close_create_form':\r\n      return {\r\n        ...state,\r\n        dialog: { ...state.dialog, show: false },\r\n      }\r\n    default:\r\n      return new Error('Unknown action')\r\n  }\r\n}\r\n\r\nconst Create = ({ isMobile }) => {\r\n  const [state, dispatch] = useReducer(reducer, initialState)\r\n  const db = new StoreManager('NOTE_DB')\r\n  const navigate = useNavigate()\r\n\r\n  const openCreateForm = async (content) => {\r\n    dispatch({ type: 'save_to_db_init', payload: content })\r\n  }\r\n\r\n  const saveToDb = async (formData) => {\r\n    const { metaTitle, metaDescription, theme, type } = formData\r\n    dispatch({ type: 'close_create_form' })\r\n    try {\r\n      await db.createNotes({\r\n        content: state.content,\r\n        metaTitle,\r\n        metaDescription,\r\n        theme,\r\n        type,\r\n      })\r\n      navigate('/')\r\n    } catch (err) {\r\n      console.log(err)\r\n      dispatch({ type: 'save_to_db_failed' })\r\n    }\r\n  }\r\n  return (\r\n    <Container md className={getClassName({ fontColor: ColorMap.dark })}>\r\n      <Row>\r\n        <Col>\r\n          <Suspense fallback={<SpinLoader />}>\r\n            <PlateEditor\r\n              id={uuid()}\r\n              isMobile={isMobile}\r\n              onSave={openCreateForm}\r\n              goBack={() => navigate('/')}\r\n              value={TEMPLATES.default}\r\n            />\r\n          </Suspense>\r\n        </Col>\r\n      </Row>\r\n      <SheetContainer show={state.dialog.show} bottom>\r\n        <CreateNoteForm\r\n          title=\"Create Notes\"\r\n          hint=\"Would be usefull for search\"\r\n          formData={{ theme: state.theme, type: state.type }}\r\n          onCancel={() => dispatch({ type: 'close_create_form' })}\r\n          onSubmit={(formData) => saveToDb(formData)}\r\n        />\r\n      </SheetContainer>\r\n    </Container>\r\n  )\r\n}\r\n\r\nexport default withSizes(({ width }) => ({ isMobile: width <= 576 }))(Create)\r\n","import {\r\n  ELEMENT_H1,\r\n  ELEMENT_PARAGRAPH,\r\n} from '@udecode/plate'\r\nconst createElement = (text, { type = ELEMENT_PARAGRAPH, mark } = {}) => {\r\n  const leaf = { text }\r\n  if (mark) {\r\n    leaf[mark] = true\r\n  }\r\n\r\n  return {\r\n    type,\r\n    children: [leaf],\r\n  }\r\n}\r\n\r\nexport const TEMPLATES = {\r\n  default: [\r\n    createElement('', { type: ELEMENT_PARAGRAPH }),\r\n  ],\r\n}\r\n"],"names":["$238aebe1d77b13f6$var$initialState","saving","content","theme","type","metaTitle","metaDescription","dialog","show","$238aebe1d77b13f6$var$reducer","state","action","payload","Error","$238aebe1d77b13f6$export$2e2bcd8739ae039","$jPO5J","withSizes","width","isMobile","dispatch","$fd2wl","useReducer","db","$8Mxml","default","navigate","$iZr1d","useNavigate","$k8UWl","jsxs","$9qkK4","Container","md","className","$1j7Qj","getClassName","fontColor","Color","dark","Row","Col","Suspense","fallback","jsx","SpinLoader","$iVzkL","id","$bo4iJ","v1","onSave","async","goBack","value","$44L9R","TEMPLATES","SheetContainer","bottom","$hdAu4","title","hint","formData","onCancel","onSubmit","createNotes","err","console","log","saveToDb","$2f7c1dbb7d1ae9f3$export$b8020e85ad90bfe5","text","$25DGs","ELEMENT_PARAGRAPH","mark","leaf","children","$2f7c1dbb7d1ae9f3$var$createElement"],"version":3,"file":"Create.34a8bd4b.js.map"}